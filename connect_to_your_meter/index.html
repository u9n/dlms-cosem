
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Resources for the python library `dlms-cosem` and general DLMS/COSEM">
      
      
        <meta name="author" content="Henrik Palmlund Wahlgren @ Utilitarian">
      
      
      
        <link rel="prev" href="../dlms_cosem/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Connect to your meter - DLMS.dev</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#connect-to-your-meter" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DLMS.dev" class="md-header__button md-logo" aria-label="DLMS.dev" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DLMS.dev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Connect to your meter
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pwitab/dlms-cosem" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    pwitab/dlms-cosem
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DLMS.dev" class="md-nav__button md-logo" aria-label="DLMS.dev" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DLMS.dev
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pwitab/dlms-cosem" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    pwitab/dlms-cosem
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dlms_cosem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About DLMS/COSEM
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Connect to your meter
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Connect to your meter
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-an-optical-probe" class="md-nav__link">
    <span class="md-ellipsis">
      Get an optical probe
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#is-your-meter-using-direct-hdlc-or-iec62056-21-mode-e-handshake" class="md-nav__link">
    <span class="md-ellipsis">
      Is your meter using direct HDLC or IEC62056-21 Mode E handshake?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find-out-how-to-address-your-meter" class="md-nav__link">
    <span class="md-ellipsis">
      Find out how to address your meter.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#is-your-meter-protected" class="md-nav__link">
    <span class="md-ellipsis">
      Is your meter protected?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Is your meter protected?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#password" class="md-nav__link">
    <span class="md-ellipsis">
      Password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encryption-and-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Encryption and authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-suite" class="md-nav__link">
    <span class="md-ellipsis">
      Security Suite
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-example" class="md-nav__link">
    <span class="md-ellipsis">
      Simple example
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-an-optical-probe" class="md-nav__link">
    <span class="md-ellipsis">
      Get an optical probe
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#is-your-meter-using-direct-hdlc-or-iec62056-21-mode-e-handshake" class="md-nav__link">
    <span class="md-ellipsis">
      Is your meter using direct HDLC or IEC62056-21 Mode E handshake?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find-out-how-to-address-your-meter" class="md-nav__link">
    <span class="md-ellipsis">
      Find out how to address your meter.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#is-your-meter-protected" class="md-nav__link">
    <span class="md-ellipsis">
      Is your meter protected?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Is your meter protected?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#password" class="md-nav__link">
    <span class="md-ellipsis">
      Password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encryption-and-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Encryption and authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-suite" class="md-nav__link">
    <span class="md-ellipsis">
      Security Suite
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-example" class="md-nav__link">
    <span class="md-ellipsis">
      Simple example
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="connect-to-your-meter">Connect to your meter<a class="headerlink" href="#connect-to-your-meter" title="Permanent link">#</a></h1>
<h2 id="get-an-optical-probe">Get an optical probe<a class="headerlink" href="#get-an-optical-probe" title="Permanent link">#</a></h2>
<p>The simplest way to start reading data from your meter is via the optical port.
You will need an optical probe to read the data, like <a href="http://www.optical-probe.de/Optical%20probes/product.html">these ones</a>.</p>
<p>There are many makes of probes. Usually each meter manufacturer also sells
a variant, but they can be a bit pricey, however they are usually of good quality.</p>
<h2 id="is-your-meter-using-direct-hdlc-or-iec62056-21-mode-e-handshake">Is your meter using direct HDLC or IEC62056-21 Mode E handshake?<a class="headerlink" href="#is-your-meter-using-direct-hdlc-or-iec62056-21-mode-e-handshake" title="Permanent link">#</a></h2>
<p>This library, as of now, just supports the direct HDLC enabled meters.</p>
<p>When you have a meter using IEC62045-21 you need to start with an IEC62056-21
initiation sequence before you can start the HDLC session.
Meters have it this way to enable users to still read the meter via the optical port
using the simpler IEC62056-21 protocol. Check out our python library for
<a href="https://github.com/pwitab/iec62056-21">IEC62056-21</a></p>
<h2 id="find-out-how-to-address-your-meter">Find out how to address your meter.<a class="headerlink" href="#find-out-how-to-address-your-meter" title="Permanent link">#</a></h2>
<p>When using HDLC you will need to know the physical address to use in HDLC communications.
This is not something that is standardized, and you might have to try different values
to get it to work.</p>
<p>Here are some values we have gathered:</p>
<table>
<thead>
<tr>
<th><strong>Manufacturer</strong></th>
<th><strong>Meter</strong></th>
<th><strong>client physical address</strong></th>
<th><strong>server (meter) physical address</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Iskraemeco</td>
<td>AM550</td>
<td>1</td>
<td>17</td>
</tr>
</tbody>
</table>
<h2 id="is-your-meter-protected">Is your meter protected?<a class="headerlink" href="#is-your-meter-protected" title="Permanent link">#</a></h2>
<p>Most meters have at least two association options. You can connect to the public part
via the <code>public_client</code> of the meter to read non sensitive data but for reading current and historical values
you will need to use the <code>management client</code></p>
<p>These addresses are reffered as logical addresses. A meter can have several logical
devices in one physical meter (mostly its just one) so the <code>server_logical_address</code> is
to address which logical device in the meter you want to connect to and the
<code>client_logical_address</code> shows with what kind of client privileges you want to connect
with.</p>
<p>The public client uses <code>client_logical_address=16</code> and the management client uses
<code>client_logical_address=1</code>.</p>
<p>Other addresses can be used for clients with specific privileges or for pre-established
associations.
This is up the meter manufacturer and/or the companion standard the meter
supports to define.</p>
<h3 id="password">Password<a class="headerlink" href="#password" title="Permanent link">#</a></h3>
<p>A meter can use no security, Low Level Security (LLS) or High Level Security for the
authenticating against the meter</p>
<p>No security means that no password needs to be submitted.</p>
<p>Low Level Security just means a password needs to be submitted.</p>
<p>High level security involves several passes with exchange of challenges between the
client and meter and then verifying those challenges. Several methods of validating
the challenge exists.</p>
<ul>
<li>Manufacturer specific</li>
<li>MD5</li>
<li>SHA1</li>
<li>GMAC</li>
<li>SHA256</li>
<li>ECDSA</li>
</ul>
<p>As of now <code>dlms-cosem</code> supports HLS-GMAC</p>
<h3 id="encryption-and-authentication">Encryption and authentication<a class="headerlink" href="#encryption-and-authentication" title="Permanent link">#</a></h3>
<p>Your meter might enforce encryption and/or authentication of messages. If you don't
have the keys it will be impossible to communicate with your meter.</p>
<p>Each encryption key also have an invocation counter. This is to protect the meter from
replay attacks. After each use the invocation counter needs to be incremented. If
the meter receives a message with an invocation counter that is the same or lower than
in the last message it will discard the message.</p>
<p>If you don't know the current invocation counter you can usually read it from the meter
using the public client.</p>
<p>It is also possible to sign messages and use a public key infrastructure for
encryption, but it is not yet supported in <code>dlms-cosem</code></p>
<h3 id="security-suite">Security Suite<a class="headerlink" href="#security-suite" title="Permanent link">#</a></h3>
<p>A meter also usually adheres to a security suite (0-2). All this does is defining what
cryptographic functions should be used for certain cryptographic operations.</p>
<table>
<thead>
<tr>
<th><strong>Operation</strong></th>
<th><strong>Security Suite 0</strong></th>
<th><strong>Security Suite 1</strong></th>
<th><strong>Security Suite 2</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Authenticated Encryption</td>
<td>AES-GCM-128</td>
<td>AES-GCM-128</td>
<td>AES-GCM-256</td>
</tr>
<tr>
<td>Key Transport</td>
<td>AES-GCM-128</td>
<td>AES-GCM-128</td>
<td>AES-GCM-256</td>
</tr>
<tr>
<td>Digital Signature</td>
<td>NA</td>
<td>ECDSA with P-256</td>
<td>ECDSA with P-384</td>
</tr>
<tr>
<td>Key Agreement</td>
<td>NA</td>
<td>ECDSA with P-256</td>
<td>ECDSA with P-384</td>
</tr>
<tr>
<td>Hash</td>
<td>NA</td>
<td>SHA-256</td>
<td>SHA-384</td>
</tr>
<tr>
<td>Compression</td>
<td>NA</td>
<td>v.44</td>
<td>v.44</td>
</tr>
</tbody>
</table>
<p>For now the most important take away from the security suite is to make sure you are
using keys of the correct length.</p>
<h2 id="simple-example">Simple example<a class="headerlink" href="#simple-example" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dlms_cosem.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">DlmsClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dlms_cosem</span><span class="w"> </span><span class="kn">import</span> <span class="n">cosem</span><span class="p">,</span> <span class="n">enumerations</span>

<span class="n">usb_port</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;/dev/tty.usbserial-A704H991&quot;</span>

<span class="c1"># public client</span>
<span class="n">dlms_client</span> <span class="o">=</span> <span class="n">DlmsClient</span><span class="o">.</span><span class="n">with_serial_hdlc_transport</span><span class="p">(</span><span class="n">serial_port</span><span class="o">=</span><span class="n">usb_port</span><span class="p">,</span>
                                                    <span class="n">server_logical_address</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                                    <span class="n">server_physical_address</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span>
                                                    <span class="n">client_logical_address</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="p">)</span>

<span class="c1"># Send HDLC connection and send an ApplicationAssociationRequest (AARQ)</span>
<span class="n">dlms_client</span><span class="o">.</span><span class="n">associate</span><span class="p">()</span>

<span class="c1"># read an invocation counter</span>
<span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="n">dlms_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">cosem</span><span class="o">.</span><span class="n">CosemAttribute</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">CosemInterface</span><span class="o">.</span><span class="n">DATA</span><span class="p">,</span>
                         <span class="n">instance</span><span class="o">=</span><span class="n">cosem</span><span class="o">.</span><span class="n">Obis</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2B</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">attribute</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="p">))</span>

<span class="c1"># Release the association by sending a ReleaseRequest and then closing the HDLC connection</span>
<span class="n">dlms_client</span><span class="o">.</span><span class="n">release_association</span><span class="p">()</span>

<span class="c1"># alternatively use the contextmanager .session() to handle the association and</span>
<span class="c1"># connection automatically.</span>
<span class="k">with</span> <span class="n">dlms_client</span><span class="o">.</span><span class="n">session</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="n">cosem</span><span class="o">.</span><span class="n">CosemAttribute</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">CosemInterface</span><span class="o">.</span><span class="n">DATA</span><span class="p">,</span>
                             <span class="n">instance</span><span class="o">=</span><span class="n">cosem</span><span class="o">.</span><span class="n">Obis</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2B</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">attribute</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="p">))</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020-2021 Palmlund Wahlgren Innovative Technology AB
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>