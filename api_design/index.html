
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Resources for the python library `dlms-cosem` and general DLMS/COSEM">
      
      
        <meta name="author" content="Henrik Palmlund Wahlgren @ Utilitarian">
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>API Design - DLMS.dev</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DLMS.dev" class="md-header__button md-logo" aria-label="DLMS.dev" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DLMS.dev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Design
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pwitab/dlms-cosem" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    pwitab/dlms-cosem
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DLMS.dev" class="md-nav__button md-logo" aria-label="DLMS.dev" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DLMS.dev
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pwitab/dlms-cosem" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    pwitab/dlms-cosem
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dlms_cosem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About DLMS/COSEM
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connect_to_your_meter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connect to your meter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-design">API Design<a class="headerlink" href="#api-design" title="Permanent link">#</a></h1>
<p>We want a simple API for the actions you perform on objects in a DLMS meter.
DLSM follows a request/response flow.</p>
<p>Simillar to how redis can pipeline actions there is the possiblite to "pipeline"
commands in DLMS with the ACCESS service where several actions can
be "clumped together in on request"</p>
<p>The client should take care of association aquire and release without the user needing
to set it up. It should also be possible to set up a predefined assosiation and skip the
aquire and release.</p>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">Client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>
</code></pre></div>
<p>But this is a bit too simple since we need to know how to model the objects in the meter.</p>
<p>There should be a way of defining the objects available in the meter beforehand or
set it up as the request goes away. Then if something is wrong in the calling a proper
error can be generated.</p>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">Client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
        <span class="n">logical_name</span><span class="o">=</span><span class="n">LogicalNameReference</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">interface</span><span class="o">=</span><span class="n">PushInterfaceV2</span><span class="p">,</span>
        <span class="n">attribute</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="s2">&quot;test&quot;</span>
        <span class="p">)</span>
    <span class="c1"># above should be the same as</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>
    <span class="c1"># if we know that the PushInterface is on LN 1.2.3.4.5 beforehand</span>
    <span class="c1"># It could be a simple dict.</span>

    <span class="c1"># it would also make it possible to use something like:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># to initate a get in the attribute.</span>
    <span class="c1"># or</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Since we want automatic handling of assiciation aquire and relase we need to set up
the client with data so it can handle it for us.</p>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">Client</span><span class="p">(</span><span class="n">encryption_key</span><span class="o">=</span><span class="s2">&quot;0f0f&quot;</span><span class="p">,</span> <span class="n">security_setup</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">proposed_conformance</span><span class="o">=</span><span class="n">Conformance</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Should result in an AARQ is sent according to association. Set up dedicated key
encryption, handle HLS password transfer, etc.
When you then send a SET (WriteRequestApdu) it should be automatically encrypted
with the global or dedicated key. If block is supported in conformance it should be
split into blocks and sent. The response should be received and when it is fully
received it should be decrypted and returned to the user.</p>
<p>By having the "heavy stuff" handled in the background it makes it possbile to keep a
simple API while adding incfreasing functionallity to the middlestack.</p>
<p>We also need to add a certain transport to the client so it can send its data to the
meter. HDLC and IP should be implemented. Maybe HDLC_over_IP. But since that is in the
IO part it can easily be broken out and extended as needed, supporting asyncio or
whatever.</p>
<p>The main part of the protocol implementation should still be sans-io.</p>
<p>client.set()
 -&gt; SetRequest
   -&gt; GlobalCipheredApdu
      -&gt; Block, Block, Block
      -&gt; connection.send("data")
      -&gt; data is sent over wire.
      &lt;- data is received.
      &lt;- Block, Block, Block
   &lt;- GlobalCipheredApdu
 &lt;- SetResponse</p>
<p>The client should be in the background and an abstraction should face the user
(if the want to).
Ex classname: Meter
The Meter class holds information on all objects on the meter. By reading the
object list of the an association it is possible to get a list of all objects and the
access rights on each attribute and method. Even the selective access information is
available. But the attribute are different for each interface type and the data you
read from them or write to them are different. Many interfaces attributes have a static
value. We want the opportunity to predefine the static data so that we automatically
can interpret the data returned from the dynamic attributes.
For example a profile generic:
To be able to interpret the buffer we need to know the captured_object.
To be able to interpret the values in the buffer we need to look up the object
(ic=DATA just holds a value, ic=Register holds a dynamic value and static information
about the scalar and the unit.)</p>
<p>So we want a way to read the current assosiation list
For every instance object we would like to read all the static information.
This should then be outputted into a file. yaml for humans or json for machines.
By supplying the file to the Meter class it is possible to call instances and get
values back. If we don't have access to do something raise an Exception.</p>
<p>Example file structure:
<div class="highlight"><pre><span></span><code><span class="nt">objects</span><span class="p">:</span>
<span class="w">  </span><span class="nt">1.2.3.4.5</span><span class="p">:</span>
<span class="w">    </span><span class="nt">interface_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w">  </span><span class="c1"># Register</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.2.3.4.5&quot;</span><span class="w">  </span><span class="c1"># Logical Name</span>
<span class="w">      </span><span class="nt">3</span><span class="p">:</span>
<span class="w">        </span><span class="nt">scalar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">13</span>
<span class="w">  </span><span class="nt">0.0.99.0.0.255</span><span class="p">:</span>
<span class="w">    </span><span class="nt">interface_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span><span class="w">  </span><span class="c1"># Profile Generic</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.0.99.0.0.255&quot;</span><span class="w">  </span><span class="c1"># Logical Name</span>
<span class="w">      </span><span class="nt">3</span><span class="p">:</span><span class="w">   </span><span class="c1"># capture objects</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">interface</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.2.3.4.5&quot;</span>
<span class="w">          </span><span class="nt">attribute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">          </span><span class="nt">data_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">interface</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2.2.3.4.5&quot;</span>
<span class="w">          </span><span class="nt">attribute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">          </span><span class="nt">data_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">interface</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.2.3.4.5&quot;</span>
<span class="w">          </span><span class="nt">attribute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">          </span><span class="nt">data_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span><span class="nt">4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class="w">  </span><span class="c1"># capture period</span>
<span class="w">      </span><span class="nt">5</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">  </span><span class="c1"># sort method</span>
<span class="w">      </span><span class="nt">6</span><span class="p">:</span><span class="w">   </span><span class="c1"># sort object</span>
<span class="w">          </span><span class="nt">interface</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.2.3.4.5&quot;</span>
<span class="w">          </span><span class="nt">attribute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">          </span><span class="nt">data_index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span><span class="nt">8</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">  </span><span class="c1"># profile_entries</span>
<span class="w">    </span><span class="nt">selective_access</span><span class="p">:</span>
<span class="w">      </span><span class="nt">2</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">access_rights</span><span class="p">:</span>
<span class="w">      </span><span class="nt">1</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
</code></pre></div></p>
<p><div class="highlight"><pre><span></span><code><span class="n">meter</span> <span class="o">=</span> <span class="n">Meter</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">my_json_file</span><span class="p">)</span>
<span class="n">meter</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">selective_access</span><span class="o">=</span><span class="n">make_range_descriptor</span><span class="p">())</span>

<span class="c1"># pipelineing access</span>
<span class="n">access</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">access</span><span class="p">()</span>
<span class="n">access</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="n">access</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
<span class="n">access</span><span class="o">.</span><span class="n">action</span><span class="p">()</span>
<span class="n">access</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>

<span class="c1"># same as</span>
<span class="n">access</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">access</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">()</span><span class="o">.</span><span class="n">action</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>

<span class="n">load_profile</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">meter</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="o">.</span><span class="n">filter_range</span><span class="p">(</span><span class="n">from_value</span><span class="o">=</span><span class="s2">&quot;2020-02-03&quot;</span><span class="p">,</span> <span class="n">to_value</span><span class="o">=</span><span class="s2">&quot;2020-03-03&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">filter_columns</span><span class="p">(</span><span class="n">from_value</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">to_value</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="p">)</span>


<span class="n">meter</span><span class="p">[</span><span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">capture_objects</span>
</code></pre></div>
s</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020-2021 Palmlund Wahlgren Innovative Technology AB
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>